#!/usr/bin/zsh

. $HOME/.profile

# Clear rules
bspc rule -r "*"

# Hotkey dÃ¦mon
pkill -x sxhkd
sxhkd &

# The cursor is a pesk
unclutter &
xbanish &

# West Arabic:  1 2 3 4 5 6 7 8 9 10
# Roman:        I II III IV V VI VII VIII IX X
# East Arabic:  Ù¡ Ù¢ Ù£ Ù¤ Ù¥ Ù¦ Ù§ Ù¨ Ù© Ù¡Ù 
# Chinese rods: ð  ð¡ ð¢ ð£ ð¤ ð¥ ð¦ ð§ ð¨ ð©
# Phoenician:   ð¤– ð¤š ð¤› ð¤›ð¤– ð¤›ð¤š ð¤›ð¤› ð¤›ð¤›ð¤– ð¤›ð¤›ð¤š ð¤›ð¤›ð¤› ð¤—
# Hebrew:       × ×‘ ×’ ×“ ×” ×• ×– ×— ×˜ ×™
# Chinese:      ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å
# Indian Tamil: à¯§ à¯¨ à¯© à¯ª à¯« à¯¬ à¯­ à¯® à¯¯ à¯°
# Thai:         à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™ à¹‘à¹
# Aegean:       ð„‡ ð„ˆ ð„‰ ð„Š ð„‹ ð„Œ ð„ ð„Ž ð„ ð„
# East Nagari:  à§§ à§¨ à§© à§ª à§« à§¬ à§­ à§® à§¯ à§§à§¦
# Malayalam:    àµ§ àµ¨ àµ© àµª àµ« àµ¬ àµ­ àµ® àµ¯ àµ°

WEST_ARABIC=(1 2 3 4 5 6 7 8 9 10)
ROMAN=(I II III IV V VI VII VIII IX X)
EAST_ARABIC=(Ù¡ Ù¢ Ù£ Ù¤ Ù¥ Ù¦ Ù§ Ù¨ Ù© Ù¡Ù )
CHINESE_RODS=(ð  ð¡ ð¢ ð£ ð¤ ð¥ ð¦ ð§ ð¨ ð©)
PHOENICIAN=(ð¤– ð¤š ð¤› ð¤›ð¤– ð¤›ð¤š ð¤›ð¤› ð¤›ð¤›ð¤– ð¤›ð¤›ð¤š ð¤›ð¤›ð¤› ð¤—)
HEBREW=(× ×‘ ×’ ×“ ×” ×• ×– ×— ×˜ ×™)
CHINESE=(ä¸€ äºŒ ä¸‰ å›› äº” å…­ ä¸ƒ å…« ä¹ å)
INDIAN_TAMIL=(à¯§ à¯¨ à¯© à¯ª à¯« à¯¬ à¯­ à¯® à¯¯ à¯°)
THAI=(à¹‘ à¹’ à¹“ à¹” à¹• à¹– à¹— à¹˜ à¹™ à¹‘à¹)
AEGEAN=(ð„‡ ð„ˆ ð„‰ ð„Š ð„‹ ð„Œ ð„ ð„Ž ð„ ð„)
EAST_NAGARI=(à§§ à§¨ à§© à§ª à§« à§¬ à§­ à§® à§¯ à§§à§¦)
MALAYALAM=(àµ§ àµ¨ àµ© àµª àµ« àµ¬ àµ­ àµ® àµ¯ àµ°)

# Set workspace names
bspc monitor -d $CHINESE

# Window decoration
bspc config border_width 0
bspc config window_gap 40
bspc config top_padding 100
bspc config focus_follows_pointer true
bspc config focused_border_color "#657185"
bspc config normal_border_color  "#322f54"

# Let onscreen keyboard be floating
#bspc rule -a onboard state=floating
#bspc rule -a Onboard state=floating

# Display wallpaper
$HOME/.bin/display-wallpaper &

# Start bar
pkill polybar
sleep 0.2
. $HOME/.scripts/toggle-bar.sh &

# Start compositior
pkill -x compton
picom --config $HOME/.config/picom.conf \
   --experimental-backends --backend glx &

# Configure keyboard and mouse
setxkbmap -model pc105 -layout gb
xsetroot -cursor_name left_ptr

# Wifi card fix
eval 'sudo iw dev '{wlp1s0,mlan0}' set power_save off;'

# Touchpad Speed
xinput set-prop \
    "Microsoft Surface Keyboard Touchpad" \
    "libinput Accel Speed" 0.9

# Set orientation
if [ "$(sys-conf get orientation)" = portrait ]; then
    rotate-portrait
fi

# Set window rules
bspc rule -a Chromium desktop='^2'

# Open startup applications
. $HOME/.scripts/startup.sh

# Switch to ^1 and refresh borders
sleep 0.2
bspc desktop -f '^1'
sleep 0.2

# Finally apply border radius
bspc config border_radius 19

~/.scripts/border-refresh.sh

echo "$XDG_CURRENT_DESKTOP" >> ~/.bspwm.out
/usr/lib/deepin-daemon/dde-osd & 2>> ~/.bspwm.out
